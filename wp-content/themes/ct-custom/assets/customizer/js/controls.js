function o(t,e){if(!t)throw new Error("Assertion failed: "+(e||""))}function p(t){o(typeof t=="string","escapeHtml expects a string");var e=document.createElement("div");return e.textContent=t,e.innerHTML}var B=".ct-range-value";function U(t){o(t instanceof Event,"e must be an Event");var e=t.target;if(!(!e||e.type!=="range")){var n=e.parentElement?e.parentElement.querySelector(B):null;n&&(n.textContent=e.value)}}function j(){var t=document.getElementById("customize-controls")||document.body;o(t instanceof HTMLElement,"container must be an HTMLElement"),t.addEventListener("input",U)}var R=300;function w(t){o(typeof t=="string","settingId must be a string"),o(t.length>0,"settingId must not be empty"),this.settingId=t,this.container=null,this.textarea=null,this._debounceTimer=null}w.prototype.init=function(t){o(t instanceof HTMLElement,"container must be an HTMLElement"),this.container=t,this.textarea=t.parentElement.querySelector(".ct-contact-point-textarea"),o(this.textarea instanceof HTMLTextAreaElement,"textarea must exist"),this._renderForm()};w.prototype._getData=function(){var t=this.textarea.value,e={};try{e=JSON.parse(t)}catch{e={}}return(typeof e!="object"||e===null||Array.isArray(e))&&(e={}),{company:e.company||"",telephone:e.telephone||"",fax_number:e.fax_number||"",email:e.email||"",contact_type:e.contact_type||"customer service",address:{street_number:e.address&&e.address.street_number||"",street_address:e.address&&e.address.street_address||"",city:e.address&&e.address.city||"",state:e.address&&e.address.state||"",postal_code:e.address&&e.address.postal_code||"",country:e.address&&e.address.country||""}}};w.prototype._setData=function(t){o(typeof t=="object"&&t!==null,"data must be an object");var e=JSON.stringify(t);this.textarea.value=e;var n=wp.customize(this.settingId);n&&n.set(e)};w.prototype._renderForm=function(){for(var t=this._getData(),e=this,n=wp.customize.control(this.settingId),r=n&&n.params&&n.params.contact_type_choices?n.params.contact_type_choices:{"customer service":"Customer Service"},i="",a=Object.keys(r),s=20,c=0,d=0;d<a.length&&!(c>=s);d++){c++;var l=a[d],y=r[l],h=t.contact_type===l?" selected":"";i+='<option value="'+p(l)+'"'+h+">"+p(y)+"</option>"}this.container.innerHTML='<div class="ct-cp-form"><div class="ct-cp-field"><label>Company</label><input type="text" class="ct-cp-company" maxlength="200" value="'+p(t.company)+'" placeholder="e.g. Blazing Sun"></div><div class="ct-cp-field"><label>Telephone</label><input type="text" class="ct-cp-telephone" maxlength="50" value="'+p(t.telephone)+'" placeholder="e.g. +1 (555) 123-4567"></div><div class="ct-cp-field"><label>Fax</label><input type="text" class="ct-cp-fax" maxlength="50" value="'+p(t.fax_number)+'" placeholder="e.g. +1 (555) 123-4568"></div><div class="ct-cp-field"><label>Email</label><input type="email" class="ct-cp-email" maxlength="254" value="'+p(t.email)+'" placeholder="e.g. info@example.com"></div><div class="ct-cp-field"><label>Contact Type</label><select class="ct-cp-contact-type">'+i+'</select></div><div class="ct-cp-divider"><span>Postal Address</span></div><div class="ct-cp-field"><label>Street Number</label><input type="text" class="ct-cp-street-number" maxlength="20" value="'+p(t.address.street_number)+'"></div><div class="ct-cp-field"><label>Street Address</label><input type="text" class="ct-cp-street-address" maxlength="200" value="'+p(t.address.street_address)+'"></div><div class="ct-cp-field"><label>City</label><input type="text" class="ct-cp-city" maxlength="100" value="'+p(t.address.city)+'"></div><div class="ct-cp-field"><label>State</label><input type="text" class="ct-cp-state" maxlength="100" value="'+p(t.address.state)+'"></div><div class="ct-cp-field"><label>Postal Code</label><input type="text" class="ct-cp-postal-code" maxlength="20" value="'+p(t.address.postal_code)+'"></div><div class="ct-cp-field"><label>Country</label><input type="text" class="ct-cp-country" maxlength="100" value="'+p(t.address.country)+'"></div></div>';for(var g=this.container.querySelector(".ct-cp-form"),_=g.querySelectorAll("input, select"),S=function(){e._onFieldChange()},f=20,m=0,v=0;v<_.length&&!(m>=f);v++)m++,_[v].addEventListener("input",S),_[v].addEventListener("change",S)};w.prototype._readForm=function(){var t=this.container.querySelector(".ct-cp-form");return o(t instanceof HTMLElement,"form must exist"),{company:t.querySelector(".ct-cp-company").value,telephone:t.querySelector(".ct-cp-telephone").value,fax_number:t.querySelector(".ct-cp-fax").value,email:t.querySelector(".ct-cp-email").value,contact_type:t.querySelector(".ct-cp-contact-type").value,address:{street_number:t.querySelector(".ct-cp-street-number").value,street_address:t.querySelector(".ct-cp-street-address").value,city:t.querySelector(".ct-cp-city").value,state:t.querySelector(".ct-cp-state").value,postal_code:t.querySelector(".ct-cp-postal-code").value,country:t.querySelector(".ct-cp-country").value}}};w.prototype._onFieldChange=function(){var t=this;this._debounceTimer&&clearTimeout(this._debounceTimer),this._debounceTimer=setTimeout(function(){var e=t._readForm();t._setData(e)},R)};function J(){wp.customize.control("bs_custom_contact_point",function(t){t.deferred.embedded.done(function(){var e=t.container.find(".ct-contact-point-control")[0];if(e){var n=new w("bs_custom_contact_point");n.init(e)}})})}var C=50;function u(t){o(typeof t=="string","settingId must be a string"),o(t.length>0,"settingId must not be empty"),this.settingId=t,this.container=null,this.textarea=null,this.editIndex=-1}u.prototype.init=function(t){o(t instanceof HTMLElement,"container must be an HTMLElement"),this.container=t,this.textarea=t.parentElement.querySelector(".ct-social-networks-textarea"),o(this.textarea instanceof HTMLTextAreaElement,"textarea must exist"),this._renderList(),this._renderForm()};u.prototype._getNetworks=function(){var t=this.textarea.value,e=[];try{e=JSON.parse(t)}catch{e=[]}return Array.isArray(e)||(e=[]),e};u.prototype._setNetworks=function(t){o(Array.isArray(t),"networks must be an array");var e=JSON.stringify(t);this.textarea.value=e;var n=wp.customize(this.settingId);n&&n.set(e)};u.prototype._renderList=function(){var t=this._getNetworks(),e=this.container.querySelector(".ct-sn-list");if(e||(e=document.createElement("div"),e.className="ct-sn-list",this.container.insertBefore(e,this.container.firstChild)),t.length===0){e.innerHTML='<p class="ct-sn-empty">No social networks added yet.</p>',this._bindListButtons();return}for(var n="",r=0,i=0;i<t.length&&!(r>=C);i++){r++;var a=t[i],s="";a.icon_url?s='<img src="'+p(a.icon_url)+'" alt="" class="ct-sn-icon-preview">':s='<span class="ct-sn-icon-placeholder dashicons dashicons-share"></span>',n+='<div class="ct-sn-item" data-index="'+i+'"><span class="ct-sn-item-icon">'+s+'</span><span class="ct-sn-item-name">'+p(a.name||"")+'</span><span class="ct-sn-item-actions"><button type="button" class="button ct-sn-edit" data-index="'+i+'" title="Edit"><span class="dashicons dashicons-edit"></span></button><button type="button" class="button ct-sn-remove" data-index="'+i+'" title="Remove"><span class="dashicons dashicons-trash"></span></button></span></div>'}e.innerHTML=n,this._bindListButtons()};u.prototype._renderForm=function(){var t=this.container.querySelector(".ct-sn-form");if(!t){var e=document.createElement("div");e.className="ct-sn-form",e.innerHTML='<div class="ct-sn-form-field"><label>Name</label><input type="text" class="ct-sn-input-name" maxlength="100" placeholder="e.g. Facebook"></div><div class="ct-sn-form-field"><label>URL</label><input type="url" class="ct-sn-input-url" maxlength="500" placeholder="https://"></div><div class="ct-sn-form-field"><label>Icon</label><div class="ct-sn-icon-row"><div class="ct-sn-icon-thumb"></div><button type="button" class="button ct-sn-select-icon">Select Icon</button><button type="button" class="button ct-sn-remove-icon" style="display:none;">Remove</button></div><input type="hidden" class="ct-sn-input-icon-id" value="0"><input type="hidden" class="ct-sn-input-icon-url" value=""></div><div class="ct-sn-form-field ct-sn-form-errors"></div><div class="ct-sn-form-actions"><button type="button" class="button button-primary ct-sn-save">Add Network</button><button type="button" class="button ct-sn-cancel" style="display:none;">Cancel</button></div>',this.container.appendChild(e),this._bindFormButtons(e)}};u.prototype._bindListButtons=function(){var t=this,e=this.container.querySelector(".ct-sn-list");if(e){var n=e.cloneNode(!0);e.parentNode.replaceChild(n,e),n.addEventListener("click",function(r){var i=r.target.closest(".ct-sn-edit");if(i){r.preventDefault();var a=parseInt(i.getAttribute("data-index"),10);t._startEdit(a);return}var s=r.target.closest(".ct-sn-remove");if(s){r.preventDefault();var c=parseInt(s.getAttribute("data-index"),10);t._removeNetwork(c)}})}};u.prototype._bindFormButtons=function(t){var e=this;t.querySelector(".ct-sn-select-icon").addEventListener("click",function(n){n.preventDefault(),e._openMediaLibrary(function(r,i){t.querySelector(".ct-sn-input-icon-id").value=r,t.querySelector(".ct-sn-input-icon-url").value=i;var a=t.querySelector(".ct-sn-icon-thumb");a.innerHTML='<img src="'+p(i)+'" alt="">',t.querySelector(".ct-sn-remove-icon").style.display=""})}),t.querySelector(".ct-sn-remove-icon").addEventListener("click",function(n){n.preventDefault(),t.querySelector(".ct-sn-input-icon-id").value="0",t.querySelector(".ct-sn-input-icon-url").value="",t.querySelector(".ct-sn-icon-thumb").innerHTML="",this.style.display="none"}),t.querySelector(".ct-sn-save").addEventListener("click",function(n){n.preventDefault(),e.editIndex>=0?e._saveEdit():e._addNetwork()}),t.querySelector(".ct-sn-cancel").addEventListener("click",function(n){n.preventDefault(),e._cancelEdit()})};u.prototype._addNetwork=function(){var t=this.container.querySelector(".ct-sn-form"),e=this._readFormData(t),n=this._validateForm(e.name,e.url,e.iconId);if(n.length>0){this._showErrors(t,n);return}var r=this._getNetworks();if(r.length>=C){this._showErrors(t,["Maximum of "+C+" networks reached."]);return}r.push({name:e.name,url:e.url,icon_id:e.iconId,icon_url:e.iconUrl}),this._setNetworks(r),this._clearForm(t),this._renderList()};u.prototype._startEdit=function(t){o(typeof t=="number","index must be a number");var e=this._getNetworks();if(!(t<0||t>=e.length)){this.editIndex=t;var n=e[t],r=this.container.querySelector(".ct-sn-form");r.querySelector(".ct-sn-input-name").value=n.name||"",r.querySelector(".ct-sn-input-url").value=n.url||"",r.querySelector(".ct-sn-input-icon-id").value=n.icon_id||0,r.querySelector(".ct-sn-input-icon-url").value=n.icon_url||"";var i=r.querySelector(".ct-sn-icon-thumb");n.icon_url?(i.innerHTML='<img src="'+p(n.icon_url)+'" alt="">',r.querySelector(".ct-sn-remove-icon").style.display=""):(i.innerHTML="",r.querySelector(".ct-sn-remove-icon").style.display="none"),r.querySelector(".ct-sn-save").textContent="Save Changes",r.querySelector(".ct-sn-cancel").style.display="",this._clearErrors(r)}};u.prototype._saveEdit=function(){var t=this.container.querySelector(".ct-sn-form"),e=this._readFormData(t),n=this._validateForm(e.name,e.url,e.iconId);if(n.length>0){this._showErrors(t,n);return}var r=this._getNetworks();if(this.editIndex<0||this.editIndex>=r.length){this._cancelEdit();return}r[this.editIndex]={name:e.name,url:e.url,icon_id:e.iconId,icon_url:e.iconUrl},this._setNetworks(r),this._cancelEdit(),this._renderList()};u.prototype._cancelEdit=function(){this.editIndex=-1;var t=this.container.querySelector(".ct-sn-form");this._clearForm(t),t.querySelector(".ct-sn-save").textContent="Add Network",t.querySelector(".ct-sn-cancel").style.display="none"};u.prototype._removeNetwork=function(t){o(typeof t=="number","index must be a number");var e=this._getNetworks();t<0||t>=e.length||(e.splice(t,1),this._setNetworks(e),this.editIndex===t?this._cancelEdit():this.editIndex>t&&this.editIndex--,this._renderList())};u.prototype._openMediaLibrary=function(t){o(typeof t=="function","callback must be a function");var e=wp.media({title:"Select Social Icon",button:{text:"Use This Icon"},multiple:!1});e.on("select",function(){var n=e.state().get("selection").first().toJSON();o(n&&n.id,"Attachment must have an id"),t(n.id,n.url)}),e.open()};u.prototype._validateForm=function(t,e,n){o(typeof t=="string","name must be a string"),o(typeof e=="string","url must be a string");var r=[];return t.trim()===""&&r.push("Name is required."),e.trim()===""?r.push("URL is required."):/^https?:\/\/.+/i.test(e.trim())||r.push("URL must start with http:// or https://."),r};u.prototype._readFormData=function(t){return{name:t.querySelector(".ct-sn-input-name").value,url:t.querySelector(".ct-sn-input-url").value,iconId:parseInt(t.querySelector(".ct-sn-input-icon-id").value,10)||0,iconUrl:t.querySelector(".ct-sn-input-icon-url").value}};u.prototype._clearForm=function(t){t.querySelector(".ct-sn-input-name").value="",t.querySelector(".ct-sn-input-url").value="",t.querySelector(".ct-sn-input-icon-id").value="0",t.querySelector(".ct-sn-input-icon-url").value="",t.querySelector(".ct-sn-icon-thumb").innerHTML="",t.querySelector(".ct-sn-remove-icon").style.display="none",this._clearErrors(t)};u.prototype._showErrors=function(t,e){o(Array.isArray(e),"errors must be an array");for(var n=t.querySelector(".ct-sn-form-errors"),r="",i=0,a=0;a<e.length&&!(i>=5);a++)i++,r+='<p class="ct-sn-error">'+p(e[a])+"</p>";n.innerHTML=r};u.prototype._clearErrors=function(t){var e=t.querySelector(".ct-sn-form-errors");e&&(e.innerHTML="")};function P(){wp.customize.control("bs_custom_social_networks",function(t){t.deferred.embedded.done(function(){var e=t.container.find(".ct-social-networks-control")[0];if(e){var n=new u("bs_custom_social_networks");n.init(e)}})})}var z=window.jQuery,F=10;function b(t){o(typeof t=="string","settingId must be a string"),o(t.length>0,"settingId must not be empty"),this.settingId=t,this.container=null,this._exporting=!1,this._importing=!1}b.prototype.init=function(t){o(t instanceof HTMLElement,"container must be an HTMLElement"),this.container=t,this._render()};b.prototype._render=function(){o(this.container instanceof HTMLElement,"container must exist");var t=this;this.container.innerHTML='<div class="ct-ei-control"><div class="ct-ei-section"><h4>Export Settings</h4><p>Download all theme settings as a JSON file.</p><button type="button" class="ct-ei-btn ct-ei-export-btn">Export Settings</button><div class="ct-ei-export-status"></div></div><div class="ct-ei-divider"></div><div class="ct-ei-section"><h4>Import Settings</h4><p>Upload a JSON file to restore settings. This will overwrite current values.</p><input type="file" class="ct-ei-file-input" accept=".json"><div class="ct-ei-file-info" style="display:none;"></div><button type="button" class="ct-ei-btn ct-ei-import-btn" disabled>Import Settings</button><div class="ct-ei-import-status"></div></div></div>';var e=this.container.querySelector(".ct-ei-export-btn");e.addEventListener("click",function(i){i.preventDefault(),t._exportSettings()});var n=this.container.querySelector(".ct-ei-file-input"),r=this.container.querySelector(".ct-ei-import-btn");n.addEventListener("change",function(){var i=n.files[0],a=t.container.querySelector(".ct-ei-file-info");i&&i.name.indexOf(".json")!==-1?(r.disabled=!1,a&&(a.textContent=i.name,a.style.display="block")):(r.disabled=!0,a&&(a.style.display="none"))}),r.addEventListener("click",function(i){i.preventDefault(),t._importSettings()})};b.prototype._exportSettings=function(){if(!this._exporting){o(typeof ctExportImportData<"u","ctExportImportData must be localized");var t=this,e=this.container.querySelector(".ct-ei-export-status"),n=this.container.querySelector(".ct-ei-export-btn");this._exporting=!0,n.disabled=!0,this._showStatus(e,"Exporting...","loading"),z.ajax({url:ctExportImportData.ajaxUrl,method:"POST",data:{nonce:ctExportImportData.exportNonce,action:"admin_export_settings",input:"1"},success:function(r){if(r.success){var i=JSON.stringify(r.data,null,2),a=new Blob([i],{type:"application/json"}),s=URL.createObjectURL(a),c=document.createElement("a");c.href=s,c.download="ct-custom-settings-"+t._getDateStamp()+".json",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(s),t._showStatus(e,"Export complete.","success")}else t._showStatus(e,"Export failed.","error")},error:function(){t._showStatus(e,"Network error.","error")},complete:function(){t._exporting=!1,n.disabled=!1,setTimeout(function(){t._clearStatus(e)},4e3)}})}};b.prototype._importSettings=function(){if(!this._importing){o(typeof ctExportImportData<"u","ctExportImportData must be localized");var t=this,e=this.container.querySelector(".ct-ei-file-input"),n=this.container.querySelector(".ct-ei-import-btn"),r=this.container.querySelector(".ct-ei-import-status");if(!(!e||!e.files[0])){var i=e.files[0];if(i.size>F*1024*1024){this._showStatus(r,"File too large (max "+F+"MB).","error");return}var a=new FileReader;a.onload=function(s){var c=s.target.result,d;try{d=JSON.parse(c)}catch{t._showStatus(r,"Invalid JSON file.","error");return}if(!d.theme||d.theme!=="ct-custom"){t._showStatus(r,"Not a valid BS Custom export file.","error");return}t._importing=!0,n.disabled=!0,t._showStatus(r,"Importing...","loading"),z.ajax({url:ctExportImportData.ajaxUrl,method:"POST",data:{nonce:ctExportImportData.importNonce,action:"admin_import_settings",input:c},success:function(l){if(l.success)t._showStatus(r,"Imported. Reloading...","success"),setTimeout(function(){window.location.reload()},1500);else{var y=l.data&&l.data.message?l.data.message:"Import failed.";t._showStatus(r,y,"error")}},error:function(){t._showStatus(r,"Network error.","error")},complete:function(){t._importing=!1,n.disabled=!1}})},a.readAsText(i)}}};b.prototype._showStatus=function(t,e,n){t&&(t.textContent=e,t.className="ct-ei-status ct-ei-status--"+n,t.style.display="block")};b.prototype._clearStatus=function(t){t&&(t.textContent="",t.className="",t.style.display="none")};b.prototype._getDateStamp=function(){var t=new Date,e=function(n){return(n<10?"0":"")+n};return t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())};function X(){wp.customize.control("bs_export_import",function(t){t.deferred.embedded.done(function(){var e=t.container.find(".ct-export-import-control")[0];if(e){var n=new b("bs_export_import");n.init(e)}})})}function $(){typeof wp>"u"||!wp.customize||(wp.customize.controlConstructor.bs_translation=wp.customize.Control.extend({ready:function(){var t=this,e=t.container[0]||t.container,n=e.querySelector(".ct-translation-control__input"),r=e.querySelector(".ct-translation-control__pick-btn"),i=e.querySelector(".ct-translation-control__dropdown"),a=e.querySelector(".ct-translation-control__search"),s=e.querySelector(".ct-translation-control__key-list");if(!n||!r||!i||!s)return;var c=t.params.translationKeys||[],d=!1,l=null;function y(f){return!f||f.indexOf("bs_translate(")===-1?null:window.ctEditorTranslator&&typeof window.ctEditorTranslator.resolve=="function"?window.ctEditorTranslator.resolve(f):null}function h(){var f=n.value||"",m=y(f);if(m===null||m===f){l&&(l.style.display="none");return}if(!l){l=document.createElement("div"),l.className="ct-translation-control__preview";var v=document.createElement("span");v.className="ct-translation-control__preview-arrow",v.textContent="â†’ ";var x=document.createElement("span");x.className="ct-translation-control__preview-text",l.appendChild(v),l.appendChild(x);var E=e.querySelector(".ct-translation-control");E&&E.appendChild(l)}l.querySelector(".ct-translation-control__preview-text").textContent=m,l.style.display="flex"}function g(f){s.innerHTML="";for(var m=(f||"").toLowerCase(),v=500,x=0,E=0;E<c.length&&!(x>=v);E++){var T=c[E];if(!(m&&T.toLowerCase().indexOf(m)===-1)){x++;var L=document.createElement("li");L.className="ct-translation-control__key-item",L.textContent=T,L.dataset.key=T,L.addEventListener("click",(function(O){return function(){n.value="bs_translate('"+O+"')",t.setting.set(n.value),S(),h()}})(T)),s.appendChild(L)}}x===0&&(s.innerHTML='<li class="ct-translation-control__key-empty">No keys found</li>')}function _(){d=!0,i.style.display="block",g(""),a&&(a.value="",a.focus())}function S(){d=!1,i.style.display="none"}r.addEventListener("click",function(){d?S():_()}),a&&a.addEventListener("input",function(){g(a.value)}),document.addEventListener("click",function(f){d&&!e.contains(f.target)&&S()}),n.addEventListener("input",function(){t.setting.set(n.value),h()}),h()}}))}var K=300;function W(t,e){if(o(t instanceof HTMLElement,"datalist must be an HTMLElement"),o(typeof e=="string","family must be a string"),!e)return{variants:"",apiFamily:""};for(var n=t.options||t.querySelectorAll("option"),r=2e3,i=0;i<n.length&&i<r;i++)if(n[i].value===e)return{variants:n[i].getAttribute("data-variants")||"",apiFamily:n[i].getAttribute("data-api-family")||e};return null}function Q(t){o(t instanceof HTMLElement,"container must be an HTMLElement");var e=t.querySelector(".ct-font-family-control__input");if(e){var n=e.getAttribute("list"),r=n?document.getElementById(n):null;o(e instanceof HTMLInputElement,"input must be an HTMLInputElement");var i=null,a=e.value||"";e.addEventListener("input",function(){i&&clearTimeout(i),i=setTimeout(function(){var s=e.value.trim();if(s!==a){var c=r?W(r,s):null;c&&(a=s,document.dispatchEvent(new CustomEvent("ct-font-family-changed",{detail:{family:s,apiFamily:c.apiFamily,variants:c.variants}})))}},K)})}}function V(){typeof wp>"u"||!wp.customize||wp.customize.control("bs_font_family",function(t){t.deferred.embedded.done(function(){var e=t.container.find(".ct-font-family-control")[0];e&&Q(e)})})}var k=20,A=500,I="",M="",q=null;function N(t,e){o(t instanceof HTMLElement,"wrapper must be an HTMLElement"),o(e instanceof HTMLInputElement,"hiddenInput must be an HTMLInputElement");for(var n=t.querySelectorAll(".ct-font-weight-checkbox"),r=[],i=0,a=0;a<n.length&&!(i>=k);a++)i++,n[a].checked&&r.push(n[a].value);var s=r.join(",");e.value=s,typeof jQuery<"u"&&jQuery(e).trigger("change")}function Y(t){o(t instanceof HTMLElement,"controlContainer must be an HTMLElement");var e=t.querySelector(".ct-font-weights-control"),n=t.querySelector(".ct-font-weights-value");if(!(!e||!n))for(var r=e.querySelectorAll(".ct-font-weight-checkbox"),i=0,a=0;a<r.length&&!(i>=k);a++)i++,r[a].addEventListener("change",function(){N(e,n),H()})}function Z(t){o(t instanceof HTMLElement,"controlContainer must be an HTMLElement");var e=t.querySelector(".ct-font-weights-control");e&&document.addEventListener("ct-font-family-changed",function(n){var r=n.detail&&n.detail.variants?n.detail.variants.split(","):[],i=n.detail&&n.detail.family?n.detail.family:"",a=n.detail&&n.detail.apiFamily?n.detail.apiFamily:i,s=e.querySelectorAll(".ct-font-weight-checkbox"),c=0;I=i,M=a;for(var d=0;d<s.length&&!(c>=k);d++){c++;var l=s[d],y=l.value,h=r.length===0||r.indexOf(y)!==-1||r.indexOf(G(y))!==-1,g=l.closest("label");g&&(g.style.display=h?"":"none"),l.checked=h}var _=t.querySelector(".ct-font-weights-value");_&&N(e,_),H()})}function G(t){o(typeof t=="string","weight must be a string");var e={100:"100",200:"200",300:"300",400:"regular",500:"500",600:"600",700:"700",800:"800",900:"900","100i":"100italic","200i":"200italic","300i":"300italic","400i":"italic","500i":"500italic","600i":"600italic","700i":"700italic","800i":"800italic","900i":"900italic"};return e[t]||t}function tt(t){o(t instanceof HTMLElement,"controlContainer must be an HTMLElement");var e=t.querySelector(".ct-font-weights-control");if(e){for(var n=e.querySelectorAll(".ct-font-weight-checkbox"),r=0,i=0;i<n.length&&!(r>=k);i++){r++;var a=n[i],s=a.closest("label");s&&s.style.display!=="none"&&(a.checked=!0)}var c=t.querySelector(".ct-font-weights-value");c&&N(e,c)}}function et(){if(q&&clearTimeout(q),nt(),typeof wp<"u"&&wp.customize){var t=wp.customize("bs_font_face_css");t&&t.set("")}q=setTimeout(function(){var e=window.ctCustomizerFontData;if(!(!e||!e.apiUrl||!e.nonce)){var n=I||M||"";if(!n&&typeof wp<"u"&&wp.customize){var r=wp.customize("bs_font_family");r&&(n=r.get()||"")}var i=new XMLHttpRequest;i.open("POST",e.apiUrl,!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-WP-Nonce",e.nonce),i.send(JSON.stringify({family:n,weights:""}))}},A)}function nt(){var t=document.querySelector("#customize-preview iframe");if(!(!t||!t.contentDocument)){var e=t.contentDocument.getElementById("ct-font-face-preview");e&&e.parentNode.removeChild(e)}}function H(){q&&clearTimeout(q),q=setTimeout(function(){if(typeof wp<"u"&&wp.customize){var t=wp.customize("bs_font_enabled");if(t&&!t.get())return}var e=I,n=M||e,r="";if(typeof wp<"u"&&wp.customize){var i=wp.customize("bs_font_weights");if(i&&(r=i.get()||""),!e){var a=wp.customize("bs_font_family");a&&(e=a.get()||"",n=e)}}!e||!r||rt(e,n,r)},A)}function rt(t,e,n){o(typeof t=="string","family must be a string"),o(typeof e=="string","apiFamily must be a string"),o(typeof n=="string","weights must be a string");var r=window.ctCustomizerFontData;if(!(!r||!r.apiUrl||!r.nonce)){var i=new XMLHttpRequest;i.open("POST",r.apiUrl,!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-WP-Nonce",r.nonce),i.onload=function(){if(i.status===200){var a=null;try{a=JSON.parse(i.responseText)}catch{return}if(!(!a||!a.success||!a.data)){var s=a.data.face_css||"";if(typeof wp<"u"&&wp.customize){var c=wp.customize("bs_font_face_css");c&&c.set(s)}it(s,t)}}},i.send(JSON.stringify({family:e,weights:n}))}}function it(t,e){if(o(typeof t=="string","css must be a string"),o(typeof e=="string","family must be a string"),!(typeof wp>"u"||!wp.customize)){var n=document.querySelector("#customize-preview iframe");if(!(!n||!n.contentDocument)){var r=n.contentDocument,i=t;e&&(i+=`
body, button, input, select, textarea { font-family: '`+e+"', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }");var a="ct-font-face-preview",s=r.getElementById(a);if(s)s.textContent=i;else{var c=r.createElement("style");c.id=a,c.textContent=i,r.head.appendChild(c)}}}}function D(t){typeof wp>"u"||!wp.customize||(wp.customize.control("bs_font_family",function(e){e.active.set(t)}),wp.customize.control("bs_font_weights",function(e){e.active.set(t)}))}function at(){if(!(typeof wp>"u"||!wp.customize)){wp.customize("bs_font_family",function(e){I=e.get()||""});var t=null;wp.customize.control("bs_font_weights",function(e){e.deferred.embedded.done(function(){var n=e.container[0];n&&(t=n,Y(n),Z(n))})}),wp.customize("bs_font_enabled",function(e){var n=e.get();D(!!n),e.bind(function(r){var i=!!r;D(i),i?(t&&tt(t),H()):et()})})}}j();J();P();X();$();V();at();
