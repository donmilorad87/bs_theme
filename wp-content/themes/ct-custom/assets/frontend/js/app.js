const Y="bs_theme";const A="light",M="dark";function g(h,t){if(!h)throw new Error("Assertion failed: "+(t||""))}class D{constructor(){g(typeof document<"u","document must exist"),g(typeof window<"u","window must exist"),this._bindToggleButtons(),this._listenForSystemPreferenceChange()}_getCurrentTheme(){const t=document.body.getAttribute("data-theme");return g(document.body!==null,"document.body must exist"),g(typeof t=="string"||t===null,"data-theme must be string or null"),t===M||t===A?t:A}_syncToggleAria(){const t=document.querySelectorAll(".theme-toggle"),s=this._getCurrentTheme()===M;g(t!==null,"querySelectorAll must return a NodeList"),g(typeof s=="boolean","isDark must be boolean");for(let n=0;n<t.length&&n<10;n++)t[n].setAttribute("aria-checked",s?"true":"false")}_setTheme(t){g(t===A||t===M,"theme must be light or dark"),g(document.body!==null,"document.body must exist"),document.body.setAttribute("data-theme",t),document.cookie=Y+"="+t+";path=/;max-age=31536000;SameSite=Lax",this._syncToggleAria()}_handleToggleClick(){const t=this._getCurrentTheme();g(t===A||t===M,"current theme must be valid");const s=t===M?A:M;g(s!==t,"next theme must differ from current"),this._setTheme(s)}_bindToggleButtons(){g(typeof document<"u","document must exist"),g(typeof document.addEventListener=="function","addEventListener must exist"),document.addEventListener("click",t=>{t.target.closest(".theme-toggle")&&this._handleToggleClick()}),this._syncToggleAria()}_listenForSystemPreferenceChange(){if(g(typeof window<"u","window must exist"),g(typeof document<"u","document must exist"),!window.matchMedia)return;window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{document.cookie.match(/(?:^|;\s*)bs_theme=(light|dark)/)||this._setTheme(s.matches?M:A)})}}const p=100;function _(h,t){if(!h)throw new Error("Assertion failed: "+(t||""))}class j{constructor(){if(_(typeof document<"u","document must exist"),_(typeof window<"u","window must exist"),this._container=document.getElementById("site-navigation"),!!this._container&&(this._button=this._container.getElementsByTagName("button")[0],!(typeof this._button>"u"))){if(this._menu=this._container.getElementsByTagName("ul")[0],typeof this._menu>"u"){this._button.style.display="none";return}this._menu.classList.add("nav-menu"),this._bindMenuToggle(),this._bindKeyboardFocus(),this._bindTouchSubmenus(),this._bindOverflowFlip()}}_bindMenuToggle(){_(typeof document<"u","document must exist"),_(typeof document.addEventListener=="function","addEventListener must exist"),document.addEventListener("click",t=>{const s=t.target.closest(".menu-toggle");if(!s)return;const n=s.closest("#site-navigation");if(!n)return;const e=n.classList.toggle("toggled");s.setAttribute("aria-expanded",e?"true":"false")})}_bindKeyboardFocus(){_(this._container instanceof HTMLElement,"container must be an HTMLElement"),_(typeof this._container.addEventListener=="function","addEventListener must exist"),this._container.addEventListener("focusin",this._handleFocusToggle,!0),this._container.addEventListener("focusout",this._handleFocusToggle,!0)}_handleFocusToggle(t){let s=t.target;const n=20;let e=0;for(;s&&!s.classList.contains("nav-menu")&&e<n;)s.tagName&&s.tagName.toLowerCase()==="li"&&s.classList.toggle("focus"),s=s.parentElement,e++}_bindTouchSubmenus(){"ontouchstart"in window&&(_(typeof document<"u","document must exist"),_(typeof document.addEventListener=="function","addEventListener must exist"),document.addEventListener("touchstart",t=>{const s=t.target.closest(".menu-item-has-children > a, .page_item_has_children > a");if(!s)return;const n=s.parentNode;if(n)if(n.classList.contains("focus"))n.classList.remove("focus");else{t.preventDefault();const e=n.parentNode.children,o=e.length<p?e.length:p;for(let r=0;r<o;r++)n!==e[r]&&e[r].classList.remove("focus");n.classList.add("focus")}},!1))}_bindOverflowFlip(){this._topLevelItems=this._container.querySelectorAll(".menu > .menu-item-has-children"),this._nestedItems=this._container.querySelectorAll(".sub-menu .menu-item-has-children"),_(this._topLevelItems!==null,"top-level items must be a NodeList"),_(this._nestedItems!==null,"nested items must be a NodeList"),_(this._topLevelItems.length<=p,"top-level count within bounds"),_(this._nestedItems.length<=p,"nested count within bounds");const t=this._nestedItems.length<p?this._nestedItems.length:p;for(let s=0;s<t;s++)this._nestedItems[s].addEventListener("mouseenter",this._checkNestedOverflow,!1);this._resizeTimer=0,this._preCheckOverflow(),window.addEventListener("resize",()=>{clearTimeout(this._resizeTimer),this._resizeTimer=setTimeout(()=>this._preCheckOverflow(),100)})}_preCheckOverflow(){_(this._container instanceof HTMLElement,"container must be an HTMLElement"),this._preCheckTopLevel(),this._preCheckNested()}_preCheckTopLevel(){_(this._topLevelItems!==null,"top-level items must exist");const t=this._topLevelItems,s=t.length<p?t.length:p,n=document.documentElement.clientWidth,e=[];for(let c=0;c<s;c++){const i=t[c],l=i.querySelector(":scope > .sub-menu");l&&e.push({li:i,subMenu:l})}if(e.length===0)return;const o=e.length<p?e.length:p,r=[];for(let c=0;c<o;c++){const i=e[c].subMenu;r.push({display:i.style.display,visibility:i.style.visibility,pointerEvents:i.style.pointerEvents}),i.style.display="block",i.style.visibility="hidden",i.style.pointerEvents="none",e[c].li.classList.remove("sub-menu--right")}const a=[];for(let c=0;c<o;c++)a.push(e[c].subMenu.getBoundingClientRect());for(let c=0;c<o;c++)a[c].right>n&&e[c].li.classList.add("sub-menu--right"),e[c].subMenu.style.display=r[c].display,e[c].subMenu.style.visibility=r[c].visibility,e[c].subMenu.style.pointerEvents=r[c].pointerEvents}_preCheckNested(){_(this._nestedItems!==null,"nested items must exist");const t=this._nestedItems,s=t.length<p?t.length:p,n=10,e=document.documentElement.clientWidth,o=[];for(let i=0;i<s;i++){const l=t[i],m=l.querySelector(":scope > .sub-menu");m&&(!l.parentElement||!l.parentElement.classList.contains("sub-menu")||o.push({item:l,subMenu:m}))}if(o.length===0)return;const r=o.length<p?o.length:p,a=new Map;for(let i=0;i<r;i++){let l=o[i].subMenu,m=0;for(;l&&l!==this._container&&m<n;)l.classList&&l.classList.contains("sub-menu")&&!a.has(l)&&window.getComputedStyle(l).display==="none"&&a.set(l,{display:l.style.display,visibility:l.style.visibility,pointerEvents:l.style.pointerEvents}),l=l.parentElement,m++}for(let i=0;i<r;i++)o[i].item.classList.remove("sub-menu--left");a.forEach(function(i,l){l.style.display="block",l.style.visibility="hidden",l.style.pointerEvents="none"});const c=[];for(let i=0;i<r;i++)c.push(o[i].subMenu.getBoundingClientRect());for(let i=0;i<r;i++)c[i].right>e&&o[i].item.classList.add("sub-menu--left");a.forEach(function(i,l){l.style.display=i.display,l.style.visibility=i.visibility,l.style.pointerEvents=i.pointerEvents})}_checkNestedOverflow(){const t=this.querySelector(":scope > .sub-menu");if(!t||!this.parentElement||!this.parentElement.classList.contains("sub-menu"))return;this.classList.remove("sub-menu--left");const s=t.getBoundingClientRect(),n=document.documentElement.clientWidth;s.right>n?this.classList.add("sub-menu--left"):s.left<0&&this.classList.remove("sub-menu--left")}}const K=300,B=999999,X="ct-back-to-top--visible";function w(h,t){if(!h)throw new Error("Assertion failed: "+(t||""))}class H{constructor(){w(typeof document<"u","document must exist"),w(typeof window<"u","window must exist"),this._button=document.getElementById("ct-back-to-top"),this._ticking=!1,this._button&&(w(this._button instanceof HTMLElement,"Button must be an HTMLElement"),w(typeof this._button.classList<"u","classList must exist"),this._bindScroll(),this._bindClick(),this._onScroll())}_bindScroll(){w(typeof window.addEventListener=="function","addEventListener must exist"),w(typeof this._ticking=="boolean","ticking must be boolean"),window.addEventListener("scroll",()=>{this._ticking||(this._ticking=!0,window.requestAnimationFrame(()=>{this._onScroll(),this._ticking=!1}))})}_bindClick(){w(this._button!==null,"Button must exist"),w(typeof this._button.addEventListener=="function","addEventListener must exist"),this._button.addEventListener("click",()=>{this._scrollToTop()})}_onScroll(){w(typeof window.scrollY=="number","scrollY must be a number");const t=Math.min(window.scrollY,B);w(t>=0&&t<=B,"scrollY must be in range"),t>K?this._button.classList.add(X):this._button.classList.remove(X)}_scrollToTop(){w(typeof window.scrollTo=="function","scrollTo must exist"),w(typeof window<"u","window must exist"),window.scrollTo({top:0,behavior:"smooth"})}}const F="bs_auth_token";class J{constructor(t){this._cacheVersion=t||"0"}getToken(){return localStorage.getItem(F)}setToken(t){localStorage.setItem(F,t)}clearToken(){localStorage.removeItem(F)}}class Z{constructor(t,s,n){this._restUrl=t,this._nonce=s,this._store=n,this._onUnauthorized=null}setUnauthorizedHandler(t){this._onUnauthorized=t}setNonce(t){this._nonce=t}post(t,s){return this._request("POST",t,s,!1)}postAuth(t,s){return this._request("POST",t,s,!0)}getAuth(t){const s=this._store.getToken(),n={"X-WP-Nonce":this._nonce};return s&&(n.Authorization="Bearer "+s),fetch(this._restUrl+t,{method:"GET",headers:n,credentials:"same-origin"}).then(e=>(e.status===401&&this._onUnauthorized&&this._onUnauthorized(),e.json()))}uploadAuth(t,s){const n=this._store.getToken(),e={"X-WP-Nonce":this._nonce};return n&&(e.Authorization="Bearer "+n),fetch(this._restUrl+t,{method:"POST",headers:e,credentials:"same-origin",body:s}).then(o=>o.json())}_request(t,s,n,e){const o={"Content-Type":"application/json","X-WP-Nonce":this._nonce};if(e){const r=this._store.getToken();r&&(o.Authorization="Bearer "+r)}return fetch(this._restUrl+s,{method:t,headers:o,credentials:"same-origin",body:JSON.stringify(n)}).then(r=>r.json())}}function P(h,t){if(!h)throw new Error("Assertion failed: "+(t||""))}class z{constructor(){if(P(typeof document<"u","document must exist"),P(typeof window<"u","window must exist"),this._authLinks=document.querySelector(".ct-auth-links"),!this._authLinks)return;const t=this._authLinks.getAttribute("data-rest-url")||"",s=this._authLinks.getAttribute("data-nonce")||"",n=this._authLinks.getAttribute("data-cache-version")||"0";this._store=new J(n),this._api=new Z(t,s,this._store),this._bindLogout()}_bindLogout(){P(this._authLinks!==null,"authLinks must exist"),P(typeof this._authLinks.addEventListener=="function","addEventListener must exist"),this._authLinks.addEventListener("click",t=>{t.target.closest('[data-ct-auth-action="logout"]')&&(t.preventDefault(),this._store.clearToken(),this._api.post("logout",{}).then(()=>{window.location.reload()}).catch(()=>{window.location.reload()}))})}}const Q=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,tt=20;class W{constructor(){const t=document.querySelectorAll(".ct-contact-form");if(!t.length)return;this._instances=[];let s=0;for(let n=0;n<t.length&&!(s>=tt);n++)s++,this._instances.push(new et(t[n]))}}class et{constructor(t){this._form=t,this._restUrl=this._form.getAttribute("data-rest-url")||"",this._nonce=this._form.getAttribute("data-nonce")||"",this._formId=this._form.getAttribute("data-form-id")||"",this._captchaEnabled=this._form.getAttribute("data-captcha-enabled")==="1",this._uploadsEnabled=this._form.getAttribute("data-uploads-enabled")==="1",this._submitting=!1,this._conditionFields=[],this._filePreviews=[],this._bindSubmit(),this._initConditionalLogic(),this._initUploads(),this._initFilePreviews(),this._captchaEnabled&&this._initCaptcha()}_bindSubmit(){this._form.addEventListener("submit",t=>{t.preventDefault(),this._handleSubmit()})}_initUploads(){if(this._uploadsEnabled)return;this._form.querySelectorAll('.ct-contact-form__field[data-field-type="file"]').forEach(s=>{s.dataset.forceHidden="1",this._setFieldVisibility(s,!1)})}_initFilePreviews(){this._form.querySelectorAll('.ct-contact-form__field[data-field-type="file"]').forEach(s=>{const n=s.querySelector('input[type="file"]'),e=s.querySelector(".ct-contact-form__file-preview");if(!n||!e)return;const o=e.querySelector(".ct-contact-form__file-preview-image"),r=e.querySelector(".ct-contact-form__file-preview-video"),a=e.querySelector(".ct-contact-form__file-preview-name"),c=e.querySelector(".ct-contact-form__file-preview-placeholder"),i=u=>{u&&u.classList.add("dn")},l=u=>{u&&u.classList.remove("dn")},m=()=>{if(e.dataset.objectUrl&&(URL.revokeObjectURL(e.dataset.objectUrl),delete e.dataset.objectUrl),e.classList.remove("is-active"),o&&(o.removeAttribute("src"),i(o),o.onerror=null),r){try{r.pause()}catch{}r.removeAttribute("src"),r.load(),i(r)}a&&(a.textContent="",i(a)),c&&(c.textContent="Preview will appear here.",l(c))};m(),n.addEventListener("change",()=>{const u=n.files&&n.files[0]?n.files[0]:null;if(!u){m();return}const x=n.getAttribute("accept")||s.getAttribute("data-accept")||"",q=this._getAcceptTokens(x);if(!this._isFileAllowed(u,q)){this._showMessage("error","File type not allowed. "+this._formatAllowedTypes(x)),n.value="",m();return}e.classList.add("is-active"),c&&i(c),a&&(a.textContent=u.name||"",l(a));const v=(u.type||"").toLowerCase(),C=(u.name||"").toLowerCase(),d=C.indexOf(".")!==-1?C.split(".").pop():"",b=["jpg","jpeg","png","gif","webp","bmp","svg"],y=["mp4","webm","ogg","mov","m4v"],T=v.indexOf("image/")===0||!v&&b.includes(d),L=v.indexOf("video/")===0||!v&&y.includes(d),E=v==="application/pdf"||d==="pdf";e.dataset.objectUrl&&(URL.revokeObjectURL(e.dataset.objectUrl),delete e.dataset.objectUrl);let f="";try{f=URL.createObjectURL(u),e.dataset.objectUrl=f}catch{f=""}if(E){if(o&&(o.removeAttribute("src"),i(o)),r){try{r.pause()}catch{}r.removeAttribute("src"),r.load(),i(r)}c&&(c.textContent="Preview not available for this file type.",l(c));return}if(T&&o&&f){o.onerror=()=>{i(o),c&&(c.textContent="Preview not available for this file type.",l(c))},o.src=f,l(o),r&&(r.removeAttribute("src"),r.load(),i(r));return}if(L&&r&&f){try{r.src=f,r.load(),l(r)}catch{r.removeAttribute("src"),r.load(),i(r)}o&&(o.removeAttribute("src"),i(o));return}if(o&&f){o.onerror=()=>{i(o),c&&(c.textContent="Preview not available for this file type.",l(c))},o.src=f,l(o),r&&(r.removeAttribute("src"),r.load(),i(r));return}c&&(c.textContent="Preview not available for this file type.",l(c))}),this._filePreviews.push({preview:e,clearPreview:m})}),this._filePreviews.length>0&&this._form.addEventListener("reset",()=>{this._clearFilePreviews()})}_clearFilePreviews(){this._filePreviews.forEach(t=>{t&&typeof t.clearPreview=="function"&&t.clearPreview()})}_initConditionalLogic(){this._form.querySelectorAll(".ct-contact-form__field[data-conditions]").forEach(s=>{const n=s.getAttribute("data-conditions");if(n)try{const e=JSON.parse(n);e&&e.rules&&Array.isArray(e.rules)&&this._conditionFields.push({element:s,config:e})}catch{}}),this._conditionFields.length>0&&(this._applyConditions(),this._form.addEventListener("input",()=>this._applyConditions()),this._form.addEventListener("change",()=>this._applyConditions()))}_applyConditions(){for(let t=0;t<this._conditionFields.length;t++){const s=this._conditionFields[t],n=s.element,e=s.config;if(n.dataset.forceHidden==="1"){this._setFieldVisibility(n,!1);continue}if(!e.enabled){this._setFieldVisibility(n,!0);continue}const o=Array.isArray(e.rules)?e.rules:[];if(o.length===0){this._setFieldVisibility(n,!0);continue}const r=e.relation==="any"?"any":"all";let a=r==="all";for(let c=0;c<o.length;c++){const i=o[c],l=this._evaluateRule(i);if(r==="all"&&!l){a=!1;break}if(r==="any"&&l){a=!0;break}r==="any"&&(a=!1)}this._setFieldVisibility(n,a)}}_evaluateRule(t){if(!t||!t.field)return!0;const s=this._getFieldValue(t.field),n=t.operator||"equals",e=t.value||"";if(n==="checked")return this._isCheckedValue(s);if(n==="not_checked")return!this._isCheckedValue(s);if(Array.isArray(s))return n==="contains"?s.includes(e):n==="equals"?s.length===1&&s[0]===e:n==="not_equals"?s.length===0||s[0]!==e:!1;const o=(s||"").toString();return n==="equals"?o===e:n==="not_equals"?o!==e:n==="contains"?o.indexOf(e)!==-1:n==="greater"?parseFloat(o)>parseFloat(e):n==="less"?parseFloat(o)<parseFloat(e):!0}_isCheckedValue(t){return Array.isArray(t)?t.length>0:t!==""&&t!==null&&t!==!1}_setFieldVisibility(t,s){if(!t)return;t.classList.toggle("is-hidden",!s),t.classList.toggle("dn",!s),t.setAttribute("aria-hidden",s?"false":"true"),t.querySelectorAll("input, select, textarea").forEach(e=>{s?(e.dataset.wasRequired==="1"&&(e.required=!0),e.disabled=!1,delete e.dataset.wasRequired):(e.required&&(e.dataset.wasRequired="1"),e.required=!1,e.disabled=!0)})}_getFieldValue(t){if(!t)return"";const s=`[name="${this._escapeSelector(t)}"]`,n=`[name="${this._escapeSelector(t)}[]"]`;let e=this._form.querySelectorAll(s);if(e.length||(e=this._form.querySelectorAll(n)),!e.length)return"";const o=e[0],r=o.type;if(r==="checkbox"){if(e.length>1){const a=[];return e.forEach(c=>{c.checked&&a.push(c.value||"1")}),a}return o.checked?o.value||"1":""}if(r==="radio"){for(let a=0;a<e.length;a++)if(e[a].checked)return e[a].value;return""}return o.value}_escapeSelector(t){return window.CSS&&CSS.escape?CSS.escape(t):t.replace(/[^a-zA-Z0-9_\-]/g,"\\$&")}_initCaptcha(){if(this._captchaCanvas=this._form.querySelector(".ct-contact-form__captcha-canvas"),this._captchaInput=this._form.querySelector('input[name="captcha_value"]'),this._captchaToken=this._form.querySelector('input[name="captcha_token"]'),this._captchaRefresh=this._form.querySelector(".ct-contact-form__captcha-refresh"),!this._captchaCanvas||!this._captchaInput||!this._captchaToken)return;this._captchaRefresh&&this._captchaRefresh.addEventListener("click",()=>this._refreshCaptcha());const t=this._captchaCanvas.getAttribute("data-captcha-code")||"",s=this._captchaToken&&this._captchaToken.value||"";if(t&&s){this._drawCaptcha(t);return}this._refreshCaptcha()}async _refreshCaptcha(){if(this._captchaCanvas)try{const s=await(await fetch(this._restUrl+"/contact/captcha",{method:"GET",headers:{"X-WP-Nonce":this._nonce},credentials:"same-origin"})).json();if(s&&s.success&&s.data){this._captchaToken.value=s.data.token||"";const n=s.data.code||"";this._captchaCanvas.setAttribute("data-captcha-code",n),this._drawCaptcha(n)}}catch{}}_drawCaptcha(t){const s=this._captchaCanvas,n=s.getContext("2d");if(!n)return;const e=s.width,o=s.height,r=e/160,a=o/50,c=document.createElement("canvas");c.width=e,c.height=o;const i=c.getContext("2d");if(!i)return;i.clearRect(0,0,e,o),i.fillStyle="#f3f4f6",i.fillRect(0,0,e,o);for(let d=0;d<16;d++){i.strokeStyle=`rgba(0,0,0,${Math.random()*.08})`,i.beginPath();const b=Math.random()*e,y=Math.random()*o;i.moveTo(b,y),i.lineTo(b+(Math.random()*40-20)*r,y+(Math.random()*40-20)*a),i.stroke()}for(let d=0;d<22;d++)i.fillStyle=`rgba(0,0,0,${Math.random()*.25})`,i.beginPath(),i.arc(Math.random()*e,Math.random()*o,(Math.random()*2+1)*Math.max(r,a),0,Math.PI*2),i.fill();for(let d=0;d<4;d++)i.strokeStyle=`rgba(0,0,0,${.15+Math.random()*.45})`,i.beginPath(),i.moveTo(Math.random()*e,Math.random()*o),i.lineTo(Math.random()*e,Math.random()*o),i.stroke();for(let d=0;d<2;d++){i.strokeStyle=`rgba(0,0,0,${Math.random()*.3})`,i.beginPath();const b=Math.random()*o;i.moveTo(0,b),i.bezierCurveTo(e*.25,b+(Math.random()*24-12)*a,e*.6,b+(Math.random()*24-12)*a,e,b+(Math.random()*24-12)*a),i.stroke()}i.textBaseline="middle",i.textAlign="center";const l=["sans-serif","serif","monospace","cursive"];for(let d=0;d<t.length;d++){const b=t[d],y=(18+Math.floor(Math.random()*10))*Math.max(r,a),T=Math.random()>.5?"700":"500",L=l[Math.floor(Math.random()*l.length)];i.font=`${T} ${y}px ${L}`;const E=(16+d*22+(Math.random()*6-3))*r,f=o/2+(Math.random()*12-6)*a,k=Math.random()*1.9-.95;i.save(),i.translate(E,f),i.rotate(k);const V=Math.random()*.8-.4,G=Math.random()*.8-.4,I=.85+Math.random()*.3;i.transform(1,G,V,1,0,0),i.scale(I,I);for(let S=0;S<1;S++){const O=(16+Math.random()*16)*r,U=(16+Math.random()*16)*a,N=(Math.random()*12-6)*r,R=(Math.random()*12-6)*a;i.strokeStyle=`rgba(0,0,0,${.2+Math.random()*.25})`,i.lineWidth=1,i.strokeRect(N,R,O,U),i.beginPath(),i.arc(N+Math.random()*O,R+Math.random()*U,(4+Math.random()*7)*Math.max(r,a),0,Math.PI*2),i.stroke()}i.fillStyle=`hsl(${Math.random()*360}, 60%, 30%)`,i.fillText(b,0,0);for(let S=0;S<1;S++)i.beginPath(),i.strokeStyle=`rgba(0,0,0,${.25+Math.random()*.3})`,i.moveTo((-12+Math.random()*24)*r,(-12+Math.random()*24)*a),i.lineTo((12+Math.random()*24)*r,(12+Math.random()*24)*a),i.stroke();i.restore()}const m=i.getImageData(0,0,e,o),u=i.createImageData(e,o),x=Math.random()*Math.PI*2,q=Math.random()*Math.PI*2,v=(4+Math.random()*3)*r,C=(3+Math.random()*2)*a;for(let d=0;d<o;d++){const b=Math.floor(Math.sin(d/o*Math.PI*2+x)*v);for(let y=0;y<e;y++){const T=Math.floor(Math.cos(y/e*Math.PI*2+q)*C),L=y+b,E=d+T,f=(d*e+y)*4;if(L>=0&&L<e&&E>=0&&E<o){const k=(E*e+L)*4;u.data[f]=m.data[k],u.data[f+1]=m.data[k+1],u.data[f+2]=m.data[k+2],u.data[f+3]=m.data[k+3]}else u.data[f]=255,u.data[f+1]=255,u.data[f+2]=255,u.data[f+3]=0}}i.putImageData(u,0,0),n.clearRect(0,0,e,o),n.drawImage(c,0,0);for(let d=0;d<2;d++)n.strokeStyle=`rgba(0,0,0,${.3+Math.random()*.3})`,n.lineWidth=1.5,n.beginPath(),n.moveTo(Math.random()*e,Math.random()*o),n.lineTo(Math.random()*e,Math.random()*o),n.stroke()}async _handleSubmit(){if(this._submitting)return;this._applyConditions();const t=this._validate();if(t.length>0){this._showMessage("error",t[0]);return}this._submitting=!0,this._setLoading(!0),this._clearMessages();try{const s=new FormData(this._form);this._formId&&s.set("form_id",this._formId);const n=await fetch(this._restUrl+"/contact/submit",{method:"POST",headers:{"X-WP-Nonce":this._nonce},credentials:"same-origin",body:s}),e=await n.json();if(this._setLoading(!1),this._submitting=!1,n.status===429){this._showMessage("error",e.message||"Too many submissions. Please try again later.");return}e.success?(this._showMessage("success",e.message||"Message sent successfully."),this._form.reset(),this._clearFilePreviews(),this._applyConditions(),this._captchaEnabled&&this._refreshCaptcha()):(this._showMessage("error",e.message||"Failed to send message."),this._captchaEnabled&&this._refreshCaptcha())}catch{this._setLoading(!1),this._submitting=!1,this._showMessage("error","A network error occurred. Please try again.")}}_validate(){const t=[];return this._form.querySelectorAll(".ct-contact-form__field").forEach(n=>{if(n.classList.contains("is-hidden")||n.getAttribute("aria-hidden")==="true"||!(n.dataset.required==="1"))return;const o=n.dataset.fieldType||"",r=n.dataset.fieldName||"";if(o==="file"){const c=n.querySelector('input[type="file"]');if(!c||!c.files||c.files.length===0)t.push("Please upload the required file.");else{const i=c.getAttribute("accept")||n.getAttribute("data-accept")||"",l=this._getAcceptTokens(i);this._isFileAllowed(c.files[0],l)||t.push("File type not allowed. "+this._formatAllowedTypes(i))}return}const a=this._getFieldValue(r);if(o==="checkbox_group"){(!Array.isArray(a)||a.length===0)&&t.push("Please fill in all required fields.");return}if(o==="checkbox"){a||t.push("Please fill in all required fields.");return}if(!a||a.toString().trim()===""){t.push("Please fill in all required fields.");return}o==="email"&&!Q.test(a.toString().trim())&&t.push("Please enter a valid email address.")}),this._captchaEnabled&&this._captchaInput&&(this._captchaInput.value.trim()||t.push("Please enter the captcha code.")),t}_getAcceptTokens(t){const s=(t||"").trim();return s?s.split(",").map(n=>n.trim().toLowerCase()).filter(n=>n.length>0):["image/jpeg","image/png","image/gif","image/webp",".jpg",".jpeg",".png",".gif",".webp"]}_isFileAllowed(t,s){if(!t)return!1;const n=(t.type||"").toLowerCase(),e=(t.name||"").toLowerCase(),o=e.indexOf(".")!==-1?e.split(".").pop():"";for(let r=0;r<s.length;r++){let a=s[r];if(a){if(a==="*"||a==="*/*")return!0;if(a.endsWith("/*")){const c=a.slice(0,-1);if(n&&n.indexOf(c)===0)return!0;continue}if(a.indexOf("/")!==-1){if(n&&n===a)return!0;continue}if(a[0]==="."&&(a=a.slice(1)),o&&a===o)return!0}}return!1}_formatAllowedTypes(t){const s=(t||"").trim();if(!s)return"Allowed: JPG, JPEG, PNG, GIF, WEBP.";const n=s.split(",").map(e=>e.trim()).filter(e=>e.length>0);return n.length===0?"Allowed: JPG, JPEG, PNG, GIF, WEBP.":"Allowed: "+n.join(", ")+"."}_showMessage(t,s){const n=this._form.querySelector(".ct-contact-form__messages");if(!n)return;n.innerHTML="";const e=document.createElement("div");e.className="ct-contact-form__message fs14 ct-contact-form__message--"+t,e.textContent=s,n.appendChild(e)}_clearMessages(){const t=this._form.querySelector(".ct-contact-form__messages");t&&(t.innerHTML="")}_setLoading(t){const s=this._form.querySelector(".ct-contact-form__submit");s&&(s.disabled=t,t?s.classList.add("ct-contact-form__submit--loading"):s.classList.remove("ct-contact-form__submit--loading"))}}class ${constructor(){this.switcher=document.querySelector(".ct-lang-switcher"),this.switcher&&(this.toggle=this.switcher.querySelector(".ct-lang-switcher__toggle"),this.dropdown=this.switcher.querySelector(".ct-lang-switcher__dropdown"),this.items=this.switcher.querySelectorAll(".ct-lang-switcher__link"),this.isOpen=!1,this.bindEvents())}bindEvents(){this.toggle&&(this.toggle.addEventListener("click",t=>{t.preventDefault(),this.toggleDropdown()}),document.addEventListener("click",t=>{this.isOpen&&!this.switcher.contains(t.target)&&this.close()}),this.toggle.addEventListener("keydown",t=>{t.key==="Enter"||t.key===" "?(t.preventDefault(),this.toggleDropdown()):t.key==="Escape"&&this.close()}),this.dropdown&&this.dropdown.addEventListener("keydown",t=>{this.handleDropdownKeydown(t)}))}toggleDropdown(){this.isOpen?this.close():this.open()}open(){this.isOpen=!0,this.switcher.classList.add("ct-lang-switcher--open"),this.toggle&&this.toggle.setAttribute("aria-expanded","true"),this.items.length>0&&this.items[0].focus()}close(){this.isOpen=!1,this.switcher.classList.remove("ct-lang-switcher--open"),this.toggle&&this.toggle.setAttribute("aria-expanded","false")}handleDropdownKeydown(t){const s=Array.from(this.items),n=document.activeElement,e=s.indexOf(n);if(t.key==="ArrowDown"){t.preventDefault();const o=(e+1)%s.length;s[o].focus()}else if(t.key==="ArrowUp"){t.preventDefault();const o=(e-1+s.length)%s.length;s[o].focus()}else t.key==="Escape"&&(this.close(),this.toggle&&this.toggle.focus())}}const st=50;function nt(h,t={},s=null){const n=window.ctTranslationData?.translations||{};if(!n[h])return h;let e=n[h];const o=["singular","zero","one","two","few","many","other"];if(typeof e=="object"&&e!==null)if(typeof s=="string"&&o.includes(s))e=e[s]||e.singular||h;else if(s!==null){const a=it(window.ctTranslationData?.iso2||"en",s);e=e[a]||e.other||e.singular||h}else e=e.singular||h;if(typeof e!="string")return h;let r=0;for(const a in t){if(r>=st)break;r++,e=e.replaceAll("##"+a+"##",String(t[a]))}return e=e.replace(/##[a-zA-Z0-9_]+##/g,""),e}function it(h,t){const s=Math.abs(t),n=s%10,e=s%100;return["ja","zh","ko","tr","vi","th","id","ms"].includes(h)?"other":["fr","hi","fa"].includes(h)?s<=1?"one":"other":["sr","ru","uk","be","hr","bs"].includes(h)?n===1&&e!==11?"one":n>=2&&n<=4&&(e<12||e>14)?"few":"other":["cs","sk"].includes(h)?s===1?"one":s>=2&&s<=4?"few":"other":h==="pl"?s===1?"one":n>=2&&n<=4&&(e<12||e>14)?"few":"many":h==="ar"?s===0?"zero":s===1?"one":s===2?"two":e>=3&&e<=10?"few":e>=11&&e<=99?"many":"other":s===1?"one":"other"}window.bs_translate=nt;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.body&&document.body.getAttribute("data-theme-toggle")!=="off"&&new D,new j,new H,new z,new W,new $}):(document.body&&document.body.getAttribute("data-theme-toggle")!=="off"&&new D,new j,new H,new z,new W,new $);
